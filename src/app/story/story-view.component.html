<md-toolbar color="primary" class="section-nav-bar">
  <span>Story</span>
  <span class="toolbar-spacer"></span>

  <button md-icon-button [mdMenuTriggerFor]="menu">
    <md-icon>more_vert</md-icon>
  </button>
  <md-menu #menu="mdMenu">
    <button md-menu-item (click)="editStory(story)">
      <md-icon>edit</md-icon>
      <span>Edit</span>
    </button>
    <button md-menu-item [disabled]="!story?.$key && story?.status==='new'" (click)="deleteStory(story)">
      <md-icon>delete</md-icon>
      <span>Delete</span>
    </button>
    <button md-menu-item [disabled]="!story" (click)="unassignStory(story)">
      <md-icon>close</md-icon>
      <span>Unassign</span>
    </button>
  </md-menu>

</md-toolbar>

<div class="story-detail-container">
      <div class="flex-container" 
        fxLayout
        fxLayoutWrap="wrap"
        fxLayout.xs="column"
        fxLayoutAlign="start start"
        fxLayoutAlign.xs="start">

        <div class="flex-item" fxFlex="70%">
          <md-card>
            <md-card-header>
              <md-card-title>{{(story)?.name}}</md-card-title>
              <md-card-subtitle *ngIf="sprint"> <a [routerLink]="['/sprints', sprint.$key]" md-button> @{{(sprint)?.name}}</a></md-card-subtitle>
            </md-card-header>
            <md-card-content>
              <h3 md-subheader>Description</h3>
              <p>
                {{(story)?.description}}
              </p>
              <h3 md-subheader>Acceptance Criterias</h3>
              <p>
                {{(story)?.acceptanceCriterias}}
              </p>
            </md-card-content>
          </md-card>
        </div>
        <div class="flex-item" fxFlex="30%">
          <story-status [story]="story"></story-status>
        </div>
        <div class="flex-item" fxFlex="50%">
          <story-progress-view [story]="story"></story-progress-view>
        </div>
        <div class="flex-item" fxFlex="50%">
          <story-progress-schedule [story]="story"></story-progress-schedule>
        </div>
    </div> 
</div>